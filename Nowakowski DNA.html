<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div><a href="mati.html">Powrót</a></div>
    <script>
        let dna = prompt("Podaj kod DNA",);
        let str = dna
        let green = ""
        let stat = ""
        pom = ""
        for (i = 0; i < str.length; i++) {
            if (i % 3 == 0) {
                if (i != 0) {
                    pom += " ";
                }
            }
            pom += str[i]
        }
        pom += " "
        tab = []
        tab1 = []
        tab2 = []
        for (i = 0; i < pom.length; i++) {

            if (pom[i] == " ") {
                if (green == "tga" || green == "taa" || green == "tag") {
                    green = "<span style=\"background: yellow;\">" + green + "</span>"

                }
                if (green == "atg") {
                    green = green.bold()
                    green = green.fontcolor("green")

                }
                tab1.push(stat)
                tab.push(green)
                green = ""
                stat = ""
                continue;
            }
            stat += pom[i]
            green += pom[i]
        }
        let text = tab.join(" ")


        console.log(tab)
        document.write(text.toUpperCase());
        document.write("<br>")
        let pom1 = ""
        for (i = 0; i < str.length; i++) {
            pom1 += str[i]
            pom1 += " "

        } console.log(pom1)
        let nic = pom1.split(" ")
        for (i = 0; i < nic.length; i++) {
            if (nic[i] == "a") {
                nic[i] = "t"
                continue
            }

            if (nic[i] == "t") {
                nic[i] = "a"
                continue
            }
            if (nic[i] == "c") {
                nic[i] = "g"
                continue
            }
            if (nic[i] == "g") {
                nic[i] = "c"
                continue
            }
        }
        let pom2 = ""
        for (i = 0; i < nic.length; i++) {
            if (i % 3 == 0) {
                if (i != 0) {
                    pom2 += " ";
                }
            }
            pom2 += nic[i]
        }

        document.write(pom2.toUpperCase())
        tab2[0] = [0, tab1[0]]
        let pom3 = false
        let pom4 = 0
        for (i = 0; i < tab1.length; i++) {
            for (j = i + 1; j < tab1.length; j++) {
                if (tab1[i] == tab1[j]) {
                    pom3 = true
                }

            }
            if (pom3 == true) {
                pom3 = false

            }
            else { pom4 += 1 }
        }
        pom3 = false
        i = 1
        while (i < pom4 + 1) {
            for (let j = 0; j < tab1.length; j++) {
                if (tab2[i - 1][1] == tab1[j]) {
                    tab2[i - 1][0] += 1
                }
                else {
                    let tryplet = tab1[j]
                    console.log(tryplet)
                    for (let k = 0; k < tab2.length; k++) {
                        if (tab2[k][1] == tryplet) {
                            pom3 = true
                        }

                    }
                    if (pom3 == true) {
                        pom3 = false
                    }
                    else { tab2[i] = [0, tryplet] }
                }
                console.log(j)
            }
            i++
        }
        // sortowanie wziąłem z  https://stackoverflow.com/questions/16096872/how-to-sort-2-dimensional-array-by-column-value
        tab2.sort(sortowanie)
        function sortowanie(a, b) {
            if (a[0] === b[0]) {
                return 0;
            }
            else {
                return (a[0] < b[0]) ? -1 : 1;
            }
        }
        document.write("<br>")
        console.table(tab2)
        let color = ""
        for (i = pom4 - 1, z = 0; i >= 0; i--, z++) {
            if (z % 5 == 0) {
                color = ""
                color = "rgb("
                for (j = 0; j < 3; j++) {
                    color += Math.floor(Math.random() * 255)
                    if (j < 2) { color += "," }

                }
                color += ")"
            }
            document.write("<span style=\"background:" + color + ";\">")
            document.write(tab2[i][1].toUpperCase())
            document.write(" -" + tab2[i][0])
            document.write("</span>")
            document.write("<br>")



        }

    </script>
</body>

</html>